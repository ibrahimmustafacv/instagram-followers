<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>زيادة متابعين انستجرام متحركة</title>
<style>
  /* ... (ابقى جميع أنماط CSS السابقة كما هي) ... */

  /* أضف هذه الأنماط الجديدة */
  .profile-pic-container {
    width: 80px;
    height: 80px;
    margin: 15px auto;
    border-radius: 50%;
    background: #f0f0f0;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    border: 3px solid #e1306c;
    position: relative;
  }
  
  .profile-pic {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: none;
  }
  
  .profile-placeholder {
    font-size: 30px;
    color: #aaa;
  }
  
  .loading-spinner {
    position: absolute;
    width: 100%;
    height: 100%;
    background: rgba(255,255,255,0.7);
    display: none;
    align-items: center;
    justify-content: center;
  }
  
  .spinner {
    width: 30px;
    height: 30px;
    border: 3px solid #f3f3f3;
    border-top: 3px solid #e1306c;
    border-radius: 50%;
    animation: spin 1s linear infinite;
  }
  
  @keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }
</style>
</head>
<body>

<!-- ... (ابقى جميع عناصر HTML السابقة كما هي) ... -->

  <form id="orderForm" style="display:none;">
    <div class="profile-pic-container">
      <div class="profile-placeholder">👤</div>
      <img src="" alt="صورة الملف الشخصي" class="profile-pic" id="profilePic">
      <div class="loading-spinner" id="loadingSpinner"><div class="spinner"></div></div>
    </div>
    
    <select id="followers-select" required>
      <!-- ... (ابقى خيارات المتابعين كما هي) ... -->
    </select>

    <input type="text" id="username" placeholder="أدخل اسم المستخدم على انستجرام" required />

    <!-- ... (ابقى بقية النموذج كما هو) ... -->
  </form>

<!-- ... (ابقى بقية HTML كما هو) ... -->

<script>
  // ... (ابقى جميع الدوال السابقة كما هي) ...

  // أضف هذه الدوال الجديدة
  document.getElementById('username').addEventListener('input', function() {
    const username = this.value.trim();
    const profilePic = document.getElementById('profilePic');
    const placeholder = document.querySelector('.profile-placeholder');
    const loadingSpinner = document.getElementById('loadingSpinner');
    
    if (username.length > 0) {
      // إظهار مؤشر التحميل
      loadingSpinner.style.display = 'flex';
      profilePic.style.display = 'none';
      placeholder.style.display = 'none';
      
      // جلب صورة الملف الشخصي (باستخدام خدمة طرف ثالث)
      fetchInstagramProfilePic(username)
        .then(imageUrl => {
          if (imageUrl) {
            profilePic.src = imageUrl;
            profilePic.style.display = 'block';
            placeholder.style.display = 'none';
          } else {
            profilePic.style.display = 'none';
            placeholder.style.display = 'block';
            placeholder.textContent = '❌';
          }
          loadingSpinner.style.display = 'none';
        })
        .catch(() => {
          loadingSpinner.style.display = 'none';
          profilePic.style.display = 'none';
          placeholder.style.display = 'block';
          placeholder.textContent = '❌';
        });
    } else {
      profilePic.style.display = 'none';
      placeholder.style.display = 'block';
      placeholder.textContent = '👤';
    }
  });

  // دالة لجلب صورة الملف الشخصي من إنستجرام
  async function fetchInstagramProfilePic(username) {
    // ملاحظة: هذه طريقة بديلة لأن واجهة برمجة إنستجرام الرسمية تتطلب مصادقة
    // يمكنك استخدام خدمة طرف ثالث مثل instagram.com أو مواقع أخرى توفر هذه الخدمة
    
    try {
      // هذه طريقة بسيطة لكنها قد لا تعمل دائمًا بسبب سياسات إنستجرام
      // في تطبيق حقيقي، ستحتاج إلى استخدام خدمة API مدفوعة أو حل أكثر تعقيدًا
      
      // محاولة جلب الصورة مباشرة من إنستجرام (قد لا تعمل في جميع المتصفحات)
      const response = await fetch(`https://www.instagram.com/${username}/?__a=1`);
      
      if (response.ok) {
        const data = await response.json();
        return data.graphql.user.profile_pic_url_hd;
      } else {
        // إذا فشل الطلب، نستخدم صورة افتراضية أو نعيد null
        return `https://instagram.com/${username}/?__a=1`;
      }
    } catch (error) {
      console.error('Error fetching profile picture:', error);
      // بديل: استخدام خدمة طرف ثالث مثل picuki.com
      return `https://picuki.com/profile/${username}`;
    }
  }
</script>

</body>
</html>
